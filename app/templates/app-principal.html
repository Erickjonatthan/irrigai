<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="react-devtools-ignore" content="true" />
    <title>Irriga.ai - Aplicativo</title>

    <!-- Favicons para todos os dispositivos -->
    <link rel="apple-touch-icon" sizes="180x180"
        href="{{ url_for('static', filename='img/favicon_io/apple-touch-icon.png') }}">
    <link rel="icon" type="image/png" sizes="32x32"
        href="{{ url_for('static', filename='img/favicon_io/favicon-32x32.png') }}">
    <link rel="icon" type="image/png" sizes="16x16"
        href="{{ url_for('static', filename='img/favicon_io/favicon-16x16.png') }}">
    <link rel="manifest" href="{{ url_for('static', filename='img/favicon_io/site.webmanifest') }}">
    <link rel="shortcut icon" href="{{ url_for('static', filename='img/favicon_io/favicon.ico') }}">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="theme-color" content="#ffffff">

    <!-- Preload da fonte Raleway para carregamento otimizado -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Font Loader Script - deve ser carregado antes de qualquer coisa -->
    <script src="{{ url_for('static', filename='js/font-loader.js') }}"></script>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" />

    <!-- CSS personalizado -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/font-loading.css') }}" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/app-layout.css') }}" />
    
    <!-- Scripts para c√°lculo de irriga√ß√£o -->
    <script src="{{ url_for('static', filename='js/calcular-irrigacao.js') }}"></script>
    <script src="{{ url_for('static', filename='js/irrigacao-manager.js') }}"></script>
</head>

<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <img src="{{ url_for('static', filename='img/logo.png') }}" alt="Logo Irriga.ai" class="logo-irrigai" />
        </header>

        <!-- Conte√∫do Principal -->
        <main class="app-content">
            <!-- Se√ß√£o Home -->
            <section id="section-home" class="app-section active">
                <div class="home-welcome">
                    <h1 class="welcome-title">Bem-vindo ao Irriga.ai!</h1>
                    <p class="welcome-subtitle">Como est√° sua planta√ß√£o hoje?</p>
                </div>

                <!-- Mapa de √çndice de Aridez - Primeira informa√ß√£o em linha completa -->
                <div id="mapa-aridez" class="content-card mapa-info" style="display: none;">
                    <div class="card-title">
                        <span class="card-icon">üó∫Ô∏è</span>
                        Mapa de √çndice de Aridez (IA)
                    </div>
                    <div class="card-description mb-3">
                        Visualiza√ß√£o geogr√°fica do √≠ndice de aridez da sua regi√£o para melhor compreens√£o das condi√ß√µes
                        clim√°ticas.
                    </div>
                    <div class="mapa-container">
                        <div class="loading-spinner"></div>
                        <div class="loading-text">Carregando mapa...</div>
                        <iframe id="iframe-mapa" style="display: none;" frameborder="0"></iframe>
                    </div>
                    <button class="card-button" id="expandir-mapa" style="margin-top: 15px;">
                        <span class="card-icon">üîç</span>
                        Expandir Mapa
                    </button>
                </div>


                <!-- Card de Localiza√ß√£o e Per√≠odo (posicionado abaixo do gr√°fico) -->
                <div class="content-card" id="info-localizacao" style="margin-top: 20px;">
                    <div class="card-title">
                        <span class="card-icon">üè°</span>
                        Sua Propriedade
                    </div>
                    <div class="card-description" id="dados-localizacao">
                        <div class="loading-spinner" style="width: 20px; height: 20px; margin: 10px auto;"></div>
                        <div class="loading-text">Carregando informa√ß√µes...</div>
                    </div>
                </div>

                <!-- Cards de Informa√ß√µes Principais em Grid -->
                <div class="cards-grid">


                    <!-- Card de Previs√£o do Tempo -->
                    <div class="content-card weather-info">
                        <div class="card-title">
                            <span class="card-icon">üå§Ô∏è</span>
                            Previs√£o e Clima
                        </div>
                        <div class="card-description">
                            Dados meteorol√≥gicos atuais e previs√µes para auxiliar nas decis√µes de irriga√ß√£o da sua
                            cultura.
                        </div>
                        <div id="dados-clima" class="mt-3">
                            <div class="loading-spinner" style="width: 20px; height: 20px; margin: 10px auto;"></div>
                            <div class="loading-text">Carregando dados clim√°ticos...</div>
                        </div>
                    </div>

                    <!-- Card de Status da An√°lise -->
                    <div class="content-card" id="status-analise">
                        <div class="card-title">
                            <span class="card-icon">üìä</span>
                            Status da An√°lise
                        </div>
                        <div class="card-description">
                            <div class="loading-spinner" style="width: 20px; height: 20px; margin: 10px auto;"></div>
                            <div class="loading-text">Verificando an√°lises...</div>
                        </div>
                    </div>

                    <!-- Card de √çndices Principais -->
                    <div class="content-card" id="indices-principais" style="display: none;">
                        <div class="card-title">
                            <span class="card-icon">üìà</span>
                            √çndices Principais
                        </div>
                        <div class="card-description" id="dados-indices">
                            <!-- Ser√° preenchido dinamicamente -->
                        </div>
                    </div>

                    <!-- Card de Simula√ß√µes de Irriga√ß√£o -->
                    <div class="content-card">
                        <div class="card-title">
                            <span class="card-icon">üöø</span>
                            Simula√ß√µes de Irriga√ß√£o
                        </div>
                        <div class="card-description">
                            Simule diferentes cen√°rios de irriga√ß√£o para otimizar o uso da √°gua e melhorar a produtividade.
                        </div>
                        <button class="card-button" data-action="abrir-simulacoes">
                            Iniciar Simula√ß√£o
                        </button>
                    </div>
                </div>

                <!-- Se√ß√£o de Gr√°fico R√°pido -->
                <div id="grafico-rapido" class="content-card" style="display: none; margin-top: 20px;">
                    <div class="card-title">
                        <span class="card-icon">üìä</span>
                        Precipita√ß√£o Anual
                    </div>
                    <div style="position: relative; height: 250px; margin-top: 15px;">
                        <canvas id="grafico-precipitacao"></canvas>
                    </div>
                    <button class="card-button" data-action="ver-analise" style="margin-top: 15px;">
                        Ver An√°lise Completa
                    </button>
                </div>


            </section>

            <!-- Se√ß√£o Cultivo -->
            <section id="section-cultivo" class="app-section">
                <h2 class="section-title">Meu Cultivo</h2>

                <!-- Recomenda√ß√µes de Irriga√ß√£o -->
                <div id="recomendacoes-cultivo" class="content-card" style="margin-bottom: 20px;">
                    <div class="card-title">
                        <span class="card-icon">üí°</span>
                        Recomenda√ß√µes de Irriga√ß√£o
                    </div>
                    <div class="card-description" id="lista-recomendacoes-cultivo">
                      
                    </div>
                </div>

                <!-- Calend√°rio de Irriga√ß√£o -->
                <div class="content-card" style="margin-bottom: 20px;">
                    <div class="card-title">
                        <span class="card-icon">üìÖ</span>
                        Calend√°rio de Irriga√ß√£o
                    </div>
                    <div class="card-description">
                        Registre suas irriga√ß√µes e acompanhe o hist√≥rico por data.
                    </div>
                    <div id="calendario-irrigacao" class="calendario-container">
                        <!-- Calend√°rio ser√° gerado dinamicamente -->
                    </div>
                </div>

                <div class="cards-grid">

                    <!-- Card de Hist√≥rico -->
                    <div class="content-card">
                        <div class="card-title">
                            <span class="card-icon">üìà</span>
                            Hist√≥rico
                        </div>
                        <div class="card-description">
                            Acompanhe o hist√≥rico das suas an√°lises e compare resultados ao longo do tempo.
                        </div>
                        <button class="card-button" data-action="ver-historico">
                            Ver Hist√≥rico
                        </button>
                    </div>

                    <!-- Card de Dicas -->
                    <div class="content-card">
                        <div class="card-title">
                            <span class="card-icon">üí°</span>
                            Dicas de Cultivo
                        </div>
                        <div class="card-description">
                            Receba dicas personalizadas baseadas na sua cultura e condi√ß√µes locais.
                        </div>
                        <button class="card-button" data-action="ver-dicas">
                            Ver Dicas
                        </button>
                    </div>
                </div>
            </section>

            <!-- Se√ß√£o Not√≠cias -->
            <section id="section-noticias" class="app-section">
                <h2 class="section-title">Not√≠cias Agr√≠colas</h2>

                <div id="noticias-container">
                    <div class="loading-state">
                        <div class="loading-spinner"></div>
                        <div class="loading-text">Carregando not√≠cias...</div>
                    </div>
                </div>
            </section>

            <!-- Se√ß√£o Configura√ß√µes -->
            <section id="section-configuracoes" class="app-section">
                <h2 class="section-title">Configura√ß√µes</h2>

                <div class="cards-grid">
                    <!-- Card de Perfil -->
                    <div class="content-card">
                        <div class="card-title">
                            <span class="card-icon">üë§</span>
                            Perfil do Usu√°rio
                        </div>
                        <div class="card-description">
                            Gerencie suas informa√ß√µes pessoais e dados da sua propriedade.
                        </div>
                        <button class="card-button" data-action="configurar-perfil">
                            Configurar
                        </button>
                    </div>

                    <!-- Card de Dados da Cultura -->
                    <div class="content-card">
                        <div class="card-title">
                            <span class="card-icon">üåæ</span>
                            Dados da Cultura
                        </div>
                        <div class="card-description">
                            Atualize as informa√ß√µes sobre sua cultura, solo e sistema de irriga√ß√£o.
                        </div>
                        <button class="card-button" data-action="editar-cultura">
                            Editar Dados
                        </button>
                    </div>

                    <!-- Card de Notifica√ß√µes -->
                    <div class="content-card">
                        <div class="card-title">
                            <span class="card-icon">üîî</span>
                            Notifica√ß√µes
                        </div>
                        <div class="card-description">
                            Configure alertas sobre irriga√ß√£o, clima e outras informa√ß√µes importantes.
                        </div>
                        <button class="card-button" data-action="configurar-notificacoes">
                            Configurar
                        </button>
                    </div>

                    <!-- Card de Sobre -->
                    <div class="content-card">
                        <div class="card-title">
                            <span class="card-icon">‚ÑπÔ∏è</span>
                            Sobre o App
                        </div>
                        <div class="card-description">
                            Informa√ß√µes sobre o Irriga.ai, vers√£o e suporte.
                        </div>
                        <button class="card-button secondary" data-action="sobre-app">
                            Ver Informa√ß√µes
                        </button>
                    </div>

                    <!-- Card de Sair -->
                    <div class="content-card">
                        <div class="card-title">
                            <span class="card-icon">üö™</span>
                            Sair da Conta
                        </div>
                        <div class="card-description">
                            Fazer logout e retornar √† tela de acesso.
                        </div>
                        <button class="card-button" style="background: #dc3545;"
                            onclick="window.location.href='/logout'">
                            Sair
                        </button>
                    </div>
                </div>
            </section>
        </main>

        <!-- Navega√ß√£o Inferior -->
        <nav class="bottom-navigation">
            <div class="nav-item active" data-section="home">
                <div class="nav-icon">üè†</div>
                <div class="nav-label">Home</div>
            </div>
            <div class="nav-item" data-section="cultivo">
                <div class="nav-icon">üå±</div>
                <div class="nav-label">Cultivo</div>
            </div>
            <div class="nav-item" data-section="noticias">
                <div class="nav-icon">üì∞</div>
                <div class="nav-label">Not√≠cias</div>
            </div>
            <div class="nav-item" data-section="configuracoes">
                <div class="nav-icon">‚öôÔ∏è</div>
                <div class="nav-label">Configura√ß√µes</div>
            </div>
        </nav>
    </div>

    <!-- Modal para expandir mapa -->
    <div class="modal fade" id="mapaModal" tabindex="-1" role="dialog" aria-labelledby="mapaModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-xl" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="mapaModalLabel">Mapa de √çndice de Aridez</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body p-0">
                    <div style="position: relative; height: 500px;">
                        <iframe id="iframe-mapa-modal" style="width: 100%; height: 100%; border: none;"
                            frameborder="0"></iframe>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="{{ url_for('static', filename='js/app-navegacao.js') }}"></script>
    <script src="{{ url_for('static', filename='js/calendario-irrigacao.js') }}"></script>
</body>

</html>